OpenSource-API BackendEste repositório contém o código-fonte da API backend para o projeto OpenSource, construída utilizando Node.js e o framework Express. A API oferece funcionalidades de autenticação de utilizadores, gestão de posts e comentários, persistindo os dados em uma base de dados SQLite.FuncionalidadesA API backend provê as seguintes funcionalidades principais:Autenticação de Utilizadores:Registo de novos utilizadores com hashing seguro de palavras-passe.Login de utilizadores existentes e geração de JSON Web Tokens (JWT) para sessões seguras.Proteção de rotas da API, garantindo que apenas utilizadores autenticados e autorizados possam aceder a recursos específicos.Gestão de Utilizadores:Criação, listagem, obtenção por ID, atualização e exclusão de perfis de utilizadores.Funções de utilizador (e.g., user, autor, admin).Gestão de Posts:Criação de novos posts com título, conteúdo, autor (ID do utilizador), imagem opcional e status de publicação.Geração automática de slugs amigáveis para URLs de posts.Listagem, obtenção por ID, atualização e exclusão de posts.Funcionalidade de publicação/despublicação de posts.Gestão de Comentários:Adição de comentários a posts específicos por utilizadores autenticados.Listagem de comentários por post.Exclusão de comentários.Endpoints da APIA API expõe os seguintes endpoints:Autenticação (/api/auth)POST /api/auth/register: Regista um novo utilizador.Corpo da Requisição (JSON): { "username": "string", "email": "string", "password": "string", "role": "string (opcional: 'user', 'autor', 'admin')" }Resposta: 201 Created ou 400 Bad Request, 409 Conflict.POST /api/auth/login: Autentica um utilizador e retorna um JWT.Corpo da Requisição (JSON): { "email": "string", "password": "string" }Resposta: 200 OK com { "user": {...}, "token": "JWT_TOKEN" } ou 401 Unauthorized.Utilizadores (/api/users)POST /api/users: Cria um novo utilizador (pode ser restrito a admins).Corpo da Requisição (JSON): { "id": "string (UUID)", "username": "string", "email": "string", "password": "string", "role": "string (opcional)" }Resposta: 201 Created.GET /api/users: Lista todos os utilizadores (protegido por JWT).Cabeçalho de Autorização: Authorization: Bearer <JWT_TOKEN>Resposta: 200 OK com um array de objetos de utilizador.GET /api/users/:id: Obtém um utilizador por ID (protegido por JWT).PUT /api/users/:id: Atualiza um utilizador por ID (protegido por JWT).DELETE /api/users/:id: Exclui um utilizador por ID (protegido por JWT).Posts (/api/posts)POST /api/posts: Cria um novo post (protegido por JWT, geralmente para 'autor'/'admin').Corpo da Requisição (JSON): { "title": "string", "content": "string", "image": "string (opcional)", "isPublished": "boolean (opcional)" }Resposta: 201 Created.GET /api/posts: Lista todos os posts.GET /api/posts/:id: Obtém um post por ID.PUT /api/posts/:id: Atualiza um post por ID (protegido por JWT).PATCH /api/posts/:id/publish: Publica um post (protegido por JWT).DELETE /api/posts/:id: Exclui um post por ID (protegido por JWT).Comentários (/api/posts/:postId/comments)POST /api/posts/:postId/comments: Adiciona um comentário a um post (protegido por JWT).Corpo da Requisição (JSON): { "content": "string" }Resposta: 201 Created.GET /api/posts/:postId/comments: Lista todos os comentários de um post.DELETE /api/posts/:postId/comments/:commentId: Exclui um comentário por ID (protegido por JWT).Instalação / DeployPara configurar e executar o projeto localmente, siga os passos abaixo:Pré-requisitos:Node.js (versão 20.x ou superior recomendada)npm (vem com o Node.js)GitClonar o Repositório:git clone https://github.com/Raphaelacristiane667/OpenSource-API.git
cd OpenSource-API
Instalar Dependências:npm install
Configurar Variáveis de Ambiente:Crie um arquivo .env na raiz do projeto.Adicione a variável de ambiente JWT_SECRET com uma string secreta forte. Exemplo:JWT_SECRET=sua_chave_secreta_muito_forte_aqui_para_jwt
Iniciar o Servidor:npm run dev
O servidor será iniciado na porta 3000 (ou a porta definida na sua variável PORT no .env). A base de dados database.sqlite será criada automaticamente na raiz do projeto se não existir.Exemplo de UsoPara interagir com a API, pode-se usar ferramentas como Postman, Insomnia ou Postwoman.Exemplo de Registo de Utilizador:Método: POSTURL: http://localhost:3000/api/auth/registerHeaders: Content-Type: application/jsonBody (raw JSON):{
"username": "joao.silva",
"email": "joao.silva@example.com",
"password": "SenhaSegura123",
"role": "autor"
}
Exemplo de Login de Utilizador:Método: POSTURL: http://localhost:3000/api/auth/loginHeaders: Content-Type: application/jsonBody (raw JSON):{
"email": "joao.silva@example.com",
"password": "SenhaSegura123"
}
Resposta (contém o token JWT):{
"user": {
"id": "...",
"username": "joao.silva",
"email": "joao.silva@example.com",
"role": "autor"
},
"token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ij...",
}
Exemplo de Acesso a Rota Protegida (Listar Utilizadores):Método: GETURL: http://localhost:3000/api/usersHeaders:Content-Type: application/jsonAuthorization: Bearer SEU_TOKEN_JWT_AQUI (substitua pelo token obtido no login)ContribuiçõesSinta-se à vontade para abrir issues ou pull requests para melhorias ou correções.LicençaEste projeto está licenciado sob a [Escolha sua licença, ex: MIT License].
